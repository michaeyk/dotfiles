bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom
bind pager R group-reply
bind pager N search-opposite

bind index gg first-entry
bind index G last-entry
bind index <tab> sync-mailbox
bind index <space> collapse-thread
bind index N search-opposite

macro index gi "<change-folder>=gmail/Inbox<enter>" "Go to inbox"
macro index ga "<change-folder>=gmail/archive<enter>" "Go to all mail"
macro index gs "<change-folder>=gmail/sent<enter>" "Go to Sent Mail"
macro index gd "<change-folder>=gmail/drafts<enter>" "Go to drafts"
macro index gt "<change-folder>=gmail/trash<enter>" "Go to trash"

macro index ci "<change-folder>=calloptima/Inbox<enter>" "Go to inbox"
macro index ca "<change-folder>=calloptima/archive<enter>" "Go to all mail"
macro index cs "<change-folder>=calloptima/sent<enter>" "Go to Sent Mail"
macro index cd "<change-folder>=calloptima/drafts<enter>" "Go to drafts"
macro index ct "<change-folder>=calloptima/trash<enter>" "Go to trash"

### BEGIN NOTMUCH-MUTT SETTINGS
macro index <F8> \
  "<enter-command>unset wait_key<enter><shell-escape>/usr/bin/notmuch-mutt --prompt search<enter><change-folder-readonly>~/.cache/notmuch/mutt/results<enter>" \
  "search mail (using notmuch)"
macro index <F9> \
  "<enter-command>unset wait_key<enter><pipe-message>/usr/bin/notmuch-mutt thread<enter><change-folder-readonly>~/.cache/notmuch/mutt/results<enter><enter-command>set wait_key<enter>" \
  "search and reconstruct owning thread (using notmuch)"

# Paths ----------------------------------------------
set folder           = ~/.mail               # mailbox location
set alias_file       = ~/.mutt/alias         # where to store aliases
set header_cache     = ~/.mutt/cache/headers # where to store headers
set message_cachedir = ~/.mutt/cache/bodies  # where to store bodies
set certificate_file = ~/.mutt/certificates  # where to store certs
set mailcap_path     = ~/.mutt/mailcap       # entries for filetypes
set tmpdir           = ~/.mutt/temp          # where to keep temp files

set certificate_file =~/.mutt/certificates

# Basic Options --------------------------------------
set wait_key = no        # shut up, mutt
set mbox_type = Maildir  # mailbox type
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that
set delete               # don't ask, just do
unset confirmappend      # don't ask, just do!
set quit                 # don't ask, just do!!
unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
set pipe_decode          # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching

auto_view text/html

# Header stuff
ignore "Authentication-Results:"
ignore "DomainKey-Signature:"
ignore "DKIM-Signature:"
hdr_order Date From To Cc

ignore *
unignore from: date subject to cc
unignore x-mailing-list: posted-to:
unignore x-mailer:

# Pager View Options ---------------------------------
set pager_index_lines = 10 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
alternative_order text/plain text/enriched text/html
set sort = 'threads'
set sort_aux = 'last-date-received'

# Compose View Options -------------------------------
set realname = "Michael Kim"          # who am i?
set envelope_from                   # which from?
set sig_dashes                       # dashes before sig
set edit_headers                     # show headers when composing
set fast_reply                       # skip to compose when replying
set askcc                            # ask for CC:
set fcc_attach                       # save attachments with the body
unset mime_forward                   # forward attachments as part of body
set forward_format = "Fwd: %s"       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies
set forward_quote                    # include message in forwards

# My Editor
set editor='vim + -c "set textwidth=72" -c "set wrap" -c "set nocp" -c "set spell"'

# goobook 
set query_command="goobook query '%s'"
bind editor <Tab> complete-query
# Add contacts to google
macro index,pager a "<pipe-message>goobook add<return>" "add the sender address to Google contacts"
# Reload goobook db
macro index,pager gr "!goobook reload\n" "Goobook reload"

bind index,pager  previous-line

# Sync email
macro index O "<shell-escape>mbsync -Va<enter>" "run offlineimap to sync all mail"
source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-dark-16.muttrc

set spoolfile = "+gmail/Inbox"
source "~/.mutt/accounts/gmail"
folder-hook $folder 'source ~/.mutt/accounts/gmail'

folder-hook gmail/* 'source ~/.mutt/accounts/gmail'
folder-hook calloptima/* 'source ~/.mutt/accounts/calloptima'

 



